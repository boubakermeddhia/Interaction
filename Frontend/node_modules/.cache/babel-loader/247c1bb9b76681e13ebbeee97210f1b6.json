{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\U-Poste\\\\Desktop\\\\projet web avance-MERN\\\\client\\\\src\\\\context.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst provider = /*#__PURE__*/React.createContext();\nexport default class Context extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      posts: [],\n      loading: true,\n      creator: '',\n      title: '',\n      message: '',\n      tags: '',\n      selectedfile: null,\n      clickedpost: false,\n      idmodi: null,\n      idpag: 0,\n      issignin: false,\n      showpassword: false,\n      firstname: '',\n      lastname: '',\n      email: '',\n      password: '',\n      confirmpassword: '',\n      mazel: false,\n      signup: false,\n      imgsrc: '',\n      name: '',\n      result: ''\n    };\n\n    this.collect = async () => {\n      const res = {\n        id: this.state.idpag\n      };\n      const API = axios.create({\n        baseURL: 'http://localhost:8080/'\n      });\n      API.interceptors.request.use(req => {\n        if (localStorage.getItem('profile')) {\n          req.headers.authorization = `Bearer ${JSON.parse(localStorage.getItem('profile')).token}`;\n        }\n\n        return req;\n      });\n      await API.post('http://localhost:8080/posts/getPosts', res).then(res => {\n        this.setState({\n          posts: res.data,\n          loading: false\n        });\n      }).catch(err => console.log(err));\n    };\n\n    this.componentDidMount = () => {\n      this.collect();\n      const x = localStorage.getItem('profile');\n\n      if (x != null) {\n        this.setState({\n          issignin: true,\n          imgsrc: JSON.parse(x).imageUrl,\n          name: JSON.parse(x).name,\n          lastname: JSON.parse(x).name.split(\" \")[0],\n          firstname: JSON.parse(x).name.split(\" \")[1],\n          email: JSON.parse(x).email\n        });\n      }\n    };\n\n    this.convertobas64 = file => {\n      return new Promise(function (resolve, reject) {\n        let reader = new FileReader();\n\n        reader.onload = function () {\n          resolve(reader.result);\n        };\n\n        reader.onerror = function (error) {\n          reject(error);\n        };\n\n        reader.readAsDataURL(file);\n      });\n    };\n\n    this.handlefile = async e => {\n      const file = e.target.files[0];\n      const base64 = await this.convertobas64(file);\n      this.setState({\n        selectedfile: base64\n      });\n    };\n\n    this.showupdate = (e, id) => {\n      e.preventDefault();\n      const post = this.state.posts.filter(res => res._id == id)[0];\n      this.setState({\n        creator: post.creator,\n        title: post.title,\n        message: post.message,\n        tags: post.tags,\n        clickedpost: !this.state.clickedpost,\n        idmodi: id,\n        selectedfile: post.selectedfile\n      });\n      console.log(\"slice\" + this.state.slicepost);\n      console.log(this.state.posts);\n    };\n\n    this.updatepost = async (e, x) => {\n      e.preventDefault();\n      const res = {\n        creator: this.state.creator,\n        title: this.state.title,\n        message: this.state.message,\n        tags: this.state.tags,\n        selectedfile: this.state.selectedfile\n      };\n      const API = axios.create({\n        baseURL: 'http://localhost:8080/'\n      });\n      API.interceptors.request.use(req => {\n        if (localStorage.getItem('profile')) {\n          req.headers.authorization = `Bearer ${JSON.parse(localStorage.getItem('profile')).token}`;\n        }\n\n        return req;\n      });\n      await axios.put('http://localhost:8080/posts/update/' + x, { ...res,\n        name: JSON.parse(localStorage.getItem('profile')).name\n      }).then(() => {\n        this.setState({\n          clickedpost: false\n        }, () => this.collect());\n      });\n    };\n\n    this.handlechange = e => {\n      e.preventDefault();\n      const name = e.target.name;\n      const value = e.target.value;\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.handlesubmitpost = async (e, x) => {\n      e.preventDefault();\n      const user = JSON.parse(localStorage.getItem('profile'));\n      const res = {\n        creator: (user === null || user === void 0 ? void 0 : user._id) || (user === null || user === void 0 ? void 0 : user.googleId),\n        title: this.state.title,\n        message: this.state.message,\n        tags: [this.state.tags],\n        selectedfile: this.state.selectedfile\n      };\n      const API = axios.create({\n        baseURL: 'http://localhost:8080/'\n      });\n      API.interceptors.request.use(req => {\n        if (localStorage.getItem('profile')) {\n          req.headers.authorization = `Bearer ${JSON.parse(localStorage.getItem('profile')).token}`;\n        }\n\n        return req;\n      });\n      await API.post('http://localhost:8080/posts/createdpost', { ...res,\n        name: JSON.parse(localStorage.getItem('profile')).name\n      }).then(setTimeout(() => {\n        this.collect();\n      }, 1500)).catch(console.log('error'));\n    };\n\n    this.clear = e => {\n      e.preventDefault();\n      this.setState({\n        creator: '',\n        title: '',\n        message: '',\n        tags: '',\n        selectedfile: ''\n      });\n    };\n\n    this.deletepost = async (e, id) => {\n      e.preventDefault();\n      const API = axios.create({\n        baseURL: 'http://localhost:8080/'\n      });\n      API.interceptors.request.use(req => {\n        if (localStorage.getItem('profile')) {\n          req.headers.authorization = `Bearer ${JSON.parse(localStorage.getItem('profile')).token}`;\n        }\n\n        return req;\n      });\n      await axios.delete('http://localhost:8080/posts/delete/' + id).then(setTimeout(() => {\n        this.collect();\n      }, 1500)).then(err => console.log(err));\n\n      if (this.state.posts.length) {\n        this.setState({\n          idpag: 0\n        });\n      }\n    };\n\n    this.likepost = async (e, id) => {\n      e.preventDefault();\n      const API = axios.create({\n        baseURL: 'http://localhost:8080/'\n      });\n      API.interceptors.request.use(req => {\n        if (localStorage.getItem('profile')) {\n          req.headers.authorization = `Bearer ${JSON.parse(localStorage.getItem('profile')).token}`;\n        }\n\n        return req;\n      });\n      await API.put('http://localhost:8080/posts/likepost/' + id).then(setTimeout(() => {\n        this.collect();\n      }, 1500));\n    };\n\n    this.googlefailure = () => {\n      console.log('try again later');\n    };\n\n    this.googlesuccess = async res => {\n      const result = res === null || res === void 0 ? void 0 : res.profileObj;\n      const token = res === null || res === void 0 ? void 0 : res.tokenId;\n\n      try {\n        await localStorage.setItem('profile', JSON.stringify({ ...result,\n          token\n        }));\n        this.setState({\n          issignin: true,\n          name: JSON.parse(localStorage.getItem('profile')).name,\n          imgsrc: JSON.parse(localStorage.getItem('profile')).imageUrl\n        });\n      } catch (error) {\n        console.log(error);\n      }\n    };\n\n    this.setshowpassword = () => {\n      this.setState({\n        showpassword: !this.state.showpassword\n      });\n    };\n\n    this.switchmode = () => {\n      this.setState({\n        signup: !this.state.signup\n      });\n    };\n\n    this.handlesubmit = async e => {\n      e.preventDefault();\n      const {\n        email,\n        password,\n        firstname,\n        lastname,\n        confirmpassword\n      } = this.state;\n\n      if (this.state.signup) {\n        const API = axios.create({\n          baseURL: 'http://localhost:8080'\n        });\n        API.interceptors.request.use(req => {\n          if (localStorage.getItem('profile')) {\n            req.headers.authorization = `Bearer ${JSON.parse(localStorage.getItem('profile')).token}`;\n          }\n\n          return req;\n        });\n        await API.post('/users/signup', {\n          email,\n          password,\n          firstname,\n          lastname,\n          confirmpassword\n        }).then(res => {\n          let result = res.data.result;\n          let token = res.data.token;\n          localStorage.setItem('profile', JSON.stringify({ ...result,\n            token\n          }));\n          this.setState({\n            issignin: true,\n            name: result.name\n          });\n        });\n      } else {\n        const API = axios.create({\n          baseURL: 'http://localhost:8080'\n        });\n        API.interceptors.request.use(req => {\n          if (localStorage.getItem('profile')) {\n            req.headers.authorization = `Bearer ${JSON.parse(localStorage.getItem('profile')).token}`;\n          }\n\n          return req;\n        });\n        await API.post('/users/signin', {\n          email,\n          password\n        }).then(res => {\n          let result = res.data.result;\n          let token = res.data.token;\n          localStorage.setItem('profile', JSON.stringify({ ...result,\n            token\n          }));\n          this.setState({\n            issignin: true,\n            name: result.name\n          });\n        });\n      }\n    };\n\n    this.logout = () => {\n      localStorage.clear();\n      this.setState({\n        issignin: false\n      });\n    };\n\n    this.editprofile = async e => {\n      e.preventDefault();\n\n      const id = JSON.parse(localStorage.getItem('profile'))._id;\n\n      const res = {\n        firstname: this.state.firstname,\n        lastname: this.state.lastname,\n        email: this.state.email,\n        password: this.state.password,\n        selectedfile: this.state.selectedfile\n      };\n      const API = axios.create({\n        baseURL: 'http://localhost:8080/'\n      });\n      API.interceptors.request.use(req => {\n        if (localStorage.getItem('profile')) {\n          req.headers.authorization = `Bearer ${JSON.parse(localStorage.getItem('profile')).token}`;\n        }\n\n        return req;\n      });\n      await axios.put('http://localhost:8080/users/update/' + id, res).then(res => {\n        this.setState({\n          firstname: this.state.firstname,\n          lastname: this.state.lastname,\n          email: this.state.email\n        });\n      });\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(provider.Provider, {\n      value: { ...this.state,\n        clear: this.clear,\n        handlechange: this.handlechange,\n        handlesubmitpost: this.handlesubmitpost,\n        handlefile: this.handlefile,\n        precpage: this.precpage,\n        editprofile: this.editprofile,\n        logout: this.logout,\n        handlesubmit: this.handlesubmit,\n        googlesuccess: this.googlesuccess,\n        switchmode: this.switchmode,\n        setshowpassword: this.setshowpassword,\n        googlefailure: this.googlefailure,\n        updatepost: this.updatepost,\n        deletepost: this.deletepost,\n        nextpage: this.nextpage,\n        showupdate: this.showupdate,\n        likepost: this.likepost\n      },\n      children: this.props.children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 13\n    }, this);\n  }\n\n}\nconst Consumer = provider.Consumer;\nexport { Context, Consumer };","map":{"version":3,"sources":["C:/Users/U-Poste/Desktop/projet web avance-MERN/client/src/context.js"],"names":["React","Component","axios","provider","createContext","Context","state","posts","loading","creator","title","message","tags","selectedfile","clickedpost","idmodi","idpag","issignin","showpassword","firstname","lastname","email","password","confirmpassword","mazel","signup","imgsrc","name","result","collect","res","id","API","create","baseURL","interceptors","request","use","req","localStorage","getItem","headers","authorization","JSON","parse","token","post","then","setState","data","catch","err","console","log","componentDidMount","x","imageUrl","split","convertobas64","file","Promise","resolve","reject","reader","FileReader","onload","onerror","error","readAsDataURL","handlefile","e","target","files","base64","showupdate","preventDefault","filter","_id","slicepost","updatepost","put","handlechange","value","handlesubmitpost","user","googleId","setTimeout","clear","deletepost","delete","length","likepost","googlefailure","googlesuccess","profileObj","tokenId","setItem","stringify","setshowpassword","switchmode","handlesubmit","logout","editprofile","render","precpage","nextpage","props","children","Consumer"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AAGA,MAAMC,QAAQ,gBAACH,KAAK,CAACI,aAAN,EAAf;AAGA,eAAe,MAAMC,OAAN,SAAsBJ,SAAtB,CAAgC;AAAA;AAAA;AAAA,SACvCK,KADuC,GACjC;AACFC,MAAAA,KAAK,EAAC,EADJ;AAEFC,MAAAA,OAAO,EAAC,IAFN;AAGFC,MAAAA,OAAO,EAAC,EAHN;AAIFC,MAAAA,KAAK,EAAC,EAJJ;AAKFC,MAAAA,OAAO,EAAC,EALN;AAMFC,MAAAA,IAAI,EAAC,EANH;AAOFC,MAAAA,YAAY,EAAC,IAPX;AAQFC,MAAAA,WAAW,EAAC,KARV;AASFC,MAAAA,MAAM,EAAC,IATL;AAUFC,MAAAA,KAAK,EAAC,CAVJ;AAWFC,MAAAA,QAAQ,EAAC,KAXP;AAYFC,MAAAA,YAAY,EAAC,KAZX;AAaFC,MAAAA,SAAS,EAAC,EAbR;AAcFC,MAAAA,QAAQ,EAAC,EAdP;AAeFC,MAAAA,KAAK,EAAC,EAfJ;AAgBFC,MAAAA,QAAQ,EAAC,EAhBP;AAiBFC,MAAAA,eAAe,EAAC,EAjBd;AAkBFC,MAAAA,KAAK,EAAC,KAlBJ;AAmBFC,MAAAA,MAAM,EAAC,KAnBL;AAoBFC,MAAAA,MAAM,EAAC,EApBL;AAqBFC,MAAAA,IAAI,EAAC,EArBH;AAsBFC,MAAAA,MAAM,EAAC;AAtBL,KADiC;;AAAA,SA2B9CC,OA3B8C,GA2BrC,YAAU;AACf,YAAMC,GAAG,GAAC;AACHC,QAAAA,EAAE,EAAC,KAAKzB,KAAL,CAAWU;AADX,OAAV;AAGA,YAAMgB,GAAG,GAAC9B,KAAK,CAAC+B,MAAN,CAAa;AAACC,QAAAA,OAAO,EAAC;AAAT,OAAb,CAAV;AACAF,MAAAA,GAAG,CAACG,YAAJ,CAAiBC,OAAjB,CAAyBC,GAAzB,CAA8BC,GAAD,IAAO;AAChC,YAAGC,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAH,EAAmC;AAC/BF,UAAAA,GAAG,CAACG,OAAJ,CAAYC,aAAZ,GAA2B,UAASC,IAAI,CAACC,KAAL,CAAWL,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAX,EAA4CK,KAAM,EAAtF;AACH;;AACD,eAAOP,GAAP;AACH,OALD;AAMF,YAAMN,GAAG,CAACc,IAAJ,CAAS,sCAAT,EAAgDhB,GAAhD,EACJiB,IADI,CACCjB,GAAG,IAAE;AACP,aAAKkB,QAAL,CAAc;AACVzC,UAAAA,KAAK,EAACuB,GAAG,CAACmB,IADA;AAEVzC,UAAAA,OAAO,EAAC;AAFE,SAAd;AAIA,OANC,EAOJ0C,KAPI,CAOEC,GAAG,IAAEC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAPP,CAAN;AAUF,KAhD8C;;AAAA,SAiD/CG,iBAjD+C,GAiD7B,MAAI;AAClB,WAAKzB,OAAL;AACJ,YAAM0B,CAAC,GAAChB,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAR;;AACA,UAAIe,CAAC,IAAE,IAAP,EAAa;AACT,aAAKP,QAAL,CAAc;AACV/B,UAAAA,QAAQ,EAAC,IADC;AAEVS,UAAAA,MAAM,EAACiB,IAAI,CAACC,KAAL,CAAWW,CAAX,EAAcC,QAFX;AAGV7B,UAAAA,IAAI,EAACgB,IAAI,CAACC,KAAL,CAAWW,CAAX,EAAc5B,IAHT;AAIVP,UAAAA,QAAQ,EAACuB,IAAI,CAACC,KAAL,CAAWW,CAAX,EAAc5B,IAAd,CAAmB8B,KAAnB,CAAyB,GAAzB,EAA8B,CAA9B,CAJC;AAKVtC,UAAAA,SAAS,EAACwB,IAAI,CAACC,KAAL,CAAWW,CAAX,EAAc5B,IAAd,CAAmB8B,KAAnB,CAAyB,GAAzB,EAA8B,CAA9B,CALA;AAMVpC,UAAAA,KAAK,EAACsB,IAAI,CAACC,KAAL,CAAWW,CAAX,EAAclC;AANV,SAAd;AAQH;AAEI,KA/D0C;;AAAA,SAgE/CqC,aAhE+C,GAgEhCC,IAAD,IAAQ;AAEd,aACI,IAAIC,OAAJ,CAAY,UAAUC,OAAV,EAAmBC,MAAnB,EAA2B;AACtC,YAAIC,MAAM,GAAG,IAAIC,UAAJ,EAAb;;AACAD,QAAAA,MAAM,CAACE,MAAP,GAAgB,YAAY;AAAEJ,UAAAA,OAAO,CAACE,MAAM,CAACnC,MAAR,CAAP;AAAyB,SAAvD;;AACAmC,QAAAA,MAAM,CAACG,OAAP,GAAiB,UAAUC,KAAV,EAAiB;AAAEL,UAAAA,MAAM,CAACK,KAAD,CAAN;AAAgB,SAApD;;AACAJ,QAAAA,MAAM,CAACK,aAAP,CAAqBT,IAArB;AAEH,OANE,CADJ;AAQP,KA1E8C;;AAAA,SA4E/CU,UA5E+C,GA4EnC,MAAOC,CAAP,IAAW;AACnB,YAAMX,IAAI,GAACW,CAAC,CAACC,MAAF,CAASC,KAAT,CAAe,CAAf,CAAX;AACA,YAAMC,MAAM,GAAE,MAAM,KAAKf,aAAL,CAAmBC,IAAnB,CAApB;AACA,WAAKX,QAAL,CAAc;AACVnC,QAAAA,YAAY,EAAC4D;AADH,OAAd;AAGH,KAlF8C;;AAAA,SAmF/CC,UAnF+C,GAmFpC,CAACJ,CAAD,EAAGvC,EAAH,KAAQ;AACfuC,MAAAA,CAAC,CAACK,cAAF;AACA,YAAM7B,IAAI,GAAC,KAAKxC,KAAL,CAAWC,KAAX,CAAiBqE,MAAjB,CAAyB9C,GAAD,IAAOA,GAAG,CAAC+C,GAAJ,IAAS9C,EAAxC,EAA4C,CAA5C,CAAX;AACA,WAAKiB,QAAL,CAAc;AACVvC,QAAAA,OAAO,EAACqC,IAAI,CAACrC,OADH;AAEVC,QAAAA,KAAK,EAACoC,IAAI,CAACpC,KAFD;AAGVC,QAAAA,OAAO,EAACmC,IAAI,CAACnC,OAHH;AAIVC,QAAAA,IAAI,EAACkC,IAAI,CAAClC,IAJA;AAKVE,QAAAA,WAAW,EAAC,CAAC,KAAKR,KAAL,CAAWQ,WALd;AAMVC,QAAAA,MAAM,EAACgB,EANG;AAOVlB,QAAAA,YAAY,EAACiC,IAAI,CAACjC;AAPR,OAAd;AASAuC,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAQ,KAAK/C,KAAL,CAAWwE,SAA/B;AACA1B,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAK/C,KAAL,CAAWC,KAAvB;AAEH,KAlG8C;;AAAA,SAmG/CwE,UAnG+C,GAmGpC,OAAMT,CAAN,EAAQf,CAAR,KAAY;AACnBe,MAAAA,CAAC,CAACK,cAAF;AACA,YAAM7C,GAAG,GAAC;AACNrB,QAAAA,OAAO,EAAC,KAAKH,KAAL,CAAWG,OADb;AAENC,QAAAA,KAAK,EAAC,KAAKJ,KAAL,CAAWI,KAFX;AAGNC,QAAAA,OAAO,EAAC,KAAKL,KAAL,CAAWK,OAHb;AAINC,QAAAA,IAAI,EAAC,KAAKN,KAAL,CAAWM,IAJV;AAKNC,QAAAA,YAAY,EAAC,KAAKP,KAAL,CAAWO;AALlB,OAAV;AAOA,YAAMmB,GAAG,GAAC9B,KAAK,CAAC+B,MAAN,CAAa;AAACC,QAAAA,OAAO,EAAC;AAAT,OAAb,CAAV;AACJF,MAAAA,GAAG,CAACG,YAAJ,CAAiBC,OAAjB,CAAyBC,GAAzB,CAA8BC,GAAD,IAAO;AAChC,YAAGC,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAH,EAAmC;AAC/BF,UAAAA,GAAG,CAACG,OAAJ,CAAYC,aAAZ,GAA2B,UAASC,IAAI,CAACC,KAAL,CAAWL,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAX,EAA4CK,KAAM,EAAtF;AACH;;AACD,eAAOP,GAAP;AACH,OALD;AAMG,YAAMpC,KAAK,CAAC8E,GAAN,CAAU,wCAAsCzB,CAAhD,EAAkD,EAAC,GAAGzB,GAAJ;AAAQH,QAAAA,IAAI,EAACgB,IAAI,CAACC,KAAL,CAAWL,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAX,EAA4Cb;AAAzD,OAAlD,EACJoB,IADI,CACC,MAAI;AACF,aAAKC,QAAL,CAAc;AACFlC,UAAAA,WAAW,EAAC;AADV,SAAd,EAEE,MAAI,KAAKe,OAAL,EAFN;AAGP,OALI,CAAN;AAOF,KA1H8C;;AAAA,SA4H/CoD,YA5H+C,GA4HjCX,CAAD,IAAK;AACTA,MAAAA,CAAC,CAACK,cAAF;AACD,YAAMhD,IAAI,GAAE2C,CAAC,CAACC,MAAF,CAAS5C,IAArB;AACA,YAAMuD,KAAK,GAACZ,CAAC,CAACC,MAAF,CAASW,KAArB;AACA,WAAKlC,QAAL,CAAc;AACb,SAACrB,IAAD,GAAOuD;AADM,OAAd;AAGH,KAnI0C;;AAAA,SAqI/CC,gBArI+C,GAqI9B,OAAMb,CAAN,EAAQf,CAAR,KAAY;AAC3Be,MAAAA,CAAC,CAACK,cAAF;AACC,YAAMS,IAAI,GAACzC,IAAI,CAACC,KAAL,CAAWL,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAX,CAAX;AACC,YAAMV,GAAG,GAAC;AACNrB,QAAAA,OAAO,EAAE,CAAA2E,IAAI,SAAJ,IAAAA,IAAI,WAAJ,YAAAA,IAAI,CAAEP,GAAN,MAAaO,IAAb,aAAaA,IAAb,uBAAaA,IAAI,CAAEC,QAAnB,CADH;AAEN3E,QAAAA,KAAK,EAAC,KAAKJ,KAAL,CAAWI,KAFX;AAGNC,QAAAA,OAAO,EAAC,KAAKL,KAAL,CAAWK,OAHb;AAINC,QAAAA,IAAI,EAAC,CAAC,KAAKN,KAAL,CAAWM,IAAZ,CAJC;AAKNC,QAAAA,YAAY,EAAC,KAAKP,KAAL,CAAWO;AALlB,OAAV;AAOA,YAAMmB,GAAG,GAAC9B,KAAK,CAAC+B,MAAN,CAAa;AAACC,QAAAA,OAAO,EAAC;AAAT,OAAb,CAAV;AACJF,MAAAA,GAAG,CAACG,YAAJ,CAAiBC,OAAjB,CAAyBC,GAAzB,CAA8BC,GAAD,IAAO;AAChC,YAAGC,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAH,EAAmC;AAC/BF,UAAAA,GAAG,CAACG,OAAJ,CAAYC,aAAZ,GAA2B,UAASC,IAAI,CAACC,KAAL,CAAWL,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAX,EAA4CK,KAAM,EAAtF;AACH;;AACD,eAAOP,GAAP;AACH,OALD;AAOI,YAAMN,GAAG,CAACc,IAAJ,CAAS,yCAAT,EAAmD,EAAC,GAAGhB,GAAJ;AAAQH,QAAAA,IAAI,EAACgB,IAAI,CAACC,KAAL,CAAWL,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAX,EAA4Cb;AAAzD,OAAnD,EACLoB,IADK,CACAuC,UAAU,CAAC,MAAM;AAAC,aAAKzD,OAAL;AACvB,OADe,EACd,IADc,CADV,EAGLqB,KAHK,CAGCE,OAAO,CAACC,GAAR,CAAY,OAAZ,CAHD,CAAN;AAKA,KA5J2C;;AAAA,SA8J/CkC,KA9J+C,GA8JxCjB,CAAD,IAAK;AACJA,MAAAA,CAAC,CAACK,cAAF;AACA,WAAK3B,QAAL,CAAc;AACbvC,QAAAA,OAAO,EAAC,EADK;AAEbC,QAAAA,KAAK,EAAC,EAFO;AAGbC,QAAAA,OAAO,EAAC,EAHK;AAIbC,QAAAA,IAAI,EAAC,EAJQ;AAKbC,QAAAA,YAAY,EAAC;AALA,OAAd;AAOH,KAvK2C;;AAAA,SAwK/C2E,UAxK+C,GAwKpC,OAAMlB,CAAN,EAAQvC,EAAR,KAAa;AACpBuC,MAAAA,CAAC,CAACK,cAAF;AACA,YAAM3C,GAAG,GAAC9B,KAAK,CAAC+B,MAAN,CAAa;AAACC,QAAAA,OAAO,EAAC;AAAT,OAAb,CAAV;AACJF,MAAAA,GAAG,CAACG,YAAJ,CAAiBC,OAAjB,CAAyBC,GAAzB,CAA8BC,GAAD,IAAO;AAChC,YAAGC,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAH,EAAmC;AAC/BF,UAAAA,GAAG,CAACG,OAAJ,CAAYC,aAAZ,GAA2B,UAASC,IAAI,CAACC,KAAL,CAAWL,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAX,EAA4CK,KAAM,EAAtF;AACH;;AACD,eAAOP,GAAP;AACH,OALD;AAMI,YAAMpC,KAAK,CAACuF,MAAN,CAAa,wCAAsC1D,EAAnD,EACLgB,IADK,CACAuC,UAAU,CAAC,MAAM;AAAC,aAAKzD,OAAL;AACvB,OADe,EACd,IADc,CADV,EAGLkB,IAHK,CAGAI,GAAG,IAAEC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAHL,CAAN;;AAIA,UAAI,KAAK7C,KAAL,CAAWC,KAAX,CAAiBmF,MAArB,EAA6B;AACzB,aAAK1C,QAAL,CAAc;AACVhC,UAAAA,KAAK,EAAC;AADI,SAAd;AAGH;AACJ,KA1L8C;;AAAA,SA4L/C2E,QA5L+C,GA4LtC,OAAMrB,CAAN,EAAQvC,EAAR,KAAa;AAClBuC,MAAAA,CAAC,CAACK,cAAF;AACA,YAAM3C,GAAG,GAAC9B,KAAK,CAAC+B,MAAN,CAAa;AAACC,QAAAA,OAAO,EAAC;AAAT,OAAb,CAAV;AACJF,MAAAA,GAAG,CAACG,YAAJ,CAAiBC,OAAjB,CAAyBC,GAAzB,CAA8BC,GAAD,IAAO;AAChC,YAAGC,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAH,EAAmC;AAC/BF,UAAAA,GAAG,CAACG,OAAJ,CAAYC,aAAZ,GAA2B,UAASC,IAAI,CAACC,KAAL,CAAWL,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAX,EAA4CK,KAAM,EAAtF;AACH;;AACD,eAAOP,GAAP;AACH,OALD;AAMI,YAAMN,GAAG,CAACgD,GAAJ,CAAQ,0CAAwCjD,EAAhD,EACLgB,IADK,CACAuC,UAAU,CAAC,MAAM;AAAC,aAAKzD,OAAL;AACvB,OADe,EACd,IADc,CADV,CAAN;AAGH,KAxM8C;;AAAA,SA0M/C+D,aA1M+C,GA0MjC,MAAI;AACdxC,MAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ;AACH,KA5M8C;;AAAA,SA6M/CwC,aA7M+C,GA6MjC,MAAM/D,GAAN,IAAY;AACtB,YAAMF,MAAM,GAACE,GAAD,aAACA,GAAD,uBAACA,GAAG,CAAEgE,UAAlB;AACA,YAAMjD,KAAK,GAACf,GAAD,aAACA,GAAD,uBAACA,GAAG,CAAEiE,OAAjB;;AACA,UAAI;AACH,cAAMxD,YAAY,CAACyD,OAAb,CAAqB,SAArB,EAA+BrD,IAAI,CAACsD,SAAL,CAAe,EAAC,GAAGrE,MAAJ;AAAWiB,UAAAA;AAAX,SAAf,CAA/B,CAAN;AACC,aAAKG,QAAL,CAAc;AACZ/B,UAAAA,QAAQ,EAAC,IADG;AAEZU,UAAAA,IAAI,EAACgB,IAAI,CAACC,KAAL,CAAWL,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAX,EAA4Cb,IAFrC;AAGZD,UAAAA,MAAM,EAACiB,IAAI,CAACC,KAAL,CAAWL,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAX,EAA4CgB;AAHvC,SAAd;AAKD,OAPD,CAOE,OAAOW,KAAP,EAAc;AACZf,QAAAA,OAAO,CAACC,GAAR,CAAYc,KAAZ;AACH;AAEJ,KA3N8C;;AAAA,SA6N/C+B,eA7N+C,GA6N/B,MAAI;AAChB,WAAKlD,QAAL,CAAc;AACV9B,QAAAA,YAAY,EAAC,CAAC,KAAKZ,KAAL,CAAWY;AADf,OAAd;AAGH,KAjO8C;;AAAA,SAmO/CiF,UAnO+C,GAmOpC,MAAI;AACX,WAAKnD,QAAL,CAAc;AACVvB,QAAAA,MAAM,EAAC,CAAC,KAAKnB,KAAL,CAAWmB;AADT,OAAd;AAIH,KAxO8C;;AAAA,SA0O/C2E,YA1O+C,GA0OlC,MAAO9B,CAAP,IAAW;AACxBA,MAAAA,CAAC,CAACK,cAAF;AACA,YAAM;AAACtD,QAAAA,KAAD;AAAOC,QAAAA,QAAP;AAAgBH,QAAAA,SAAhB;AAA0BC,QAAAA,QAA1B;AAAmCG,QAAAA;AAAnC,UAAoD,KAAKjB,KAA/D;;AACA,UAAG,KAAKA,KAAL,CAAWmB,MAAd,EAAqB;AACjB,cAAMO,GAAG,GAAC9B,KAAK,CAAC+B,MAAN,CAAa;AAACC,UAAAA,OAAO,EAAC;AAAT,SAAb,CAAV;AACIF,QAAAA,GAAG,CAACG,YAAJ,CAAiBC,OAAjB,CAAyBC,GAAzB,CAA8BC,GAAD,IAAO;AAChC,cAAGC,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAH,EAAmC;AAC/BF,YAAAA,GAAG,CAACG,OAAJ,CAAYC,aAAZ,GAA2B,UAASC,IAAI,CAACC,KAAL,CAAWL,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAX,EAA4CK,KAAM,EAAtF;AACH;;AACD,iBAAOP,GAAP;AACH,SALD;AAMJ,cAAMN,GAAG,CAACc,IAAJ,CAAS,eAAT,EAAyB;AAACzB,UAAAA,KAAD;AAAOC,UAAAA,QAAP;AAAgBH,UAAAA,SAAhB;AAA0BC,UAAAA,QAA1B;AAAmCG,UAAAA;AAAnC,SAAzB,EACLwB,IADK,CACAjB,GAAG,IAAE;AACP,cAAIF,MAAM,GAACE,GAAG,CAACmB,IAAJ,CAASrB,MAApB;AACA,cAAIiB,KAAK,GAACf,GAAG,CAACmB,IAAJ,CAASJ,KAAnB;AACAN,UAAAA,YAAY,CAACyD,OAAb,CAAqB,SAArB,EAA+BrD,IAAI,CAACsD,SAAL,CAAe,EAAC,GAAGrE,MAAJ;AAAWiB,YAAAA;AAAX,WAAf,CAA/B;AACA,eAAKG,QAAL,CAAc;AACV/B,YAAAA,QAAQ,EAAC,IADC;AAEVU,YAAAA,IAAI,EAACC,MAAM,CAACD;AAFF,WAAd;AAIH,SATK,CAAN;AAWH,OAnBD,MAmBK;AACD,cAAMK,GAAG,GAAC9B,KAAK,CAAC+B,MAAN,CAAa;AAACC,UAAAA,OAAO,EAAC;AAAT,SAAb,CAAV;AACJF,QAAAA,GAAG,CAACG,YAAJ,CAAiBC,OAAjB,CAAyBC,GAAzB,CAA8BC,GAAD,IAAO;AAChC,cAAGC,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAH,EAAmC;AAC/BF,YAAAA,GAAG,CAACG,OAAJ,CAAYC,aAAZ,GAA2B,UAASC,IAAI,CAACC,KAAL,CAAWL,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAX,EAA4CK,KAAM,EAAtF;AACH;;AACD,iBAAOP,GAAP;AACH,SALD;AAMI,cAAMN,GAAG,CAACc,IAAJ,CAAS,eAAT,EAAyB;AAACzB,UAAAA,KAAD;AAAOC,UAAAA;AAAP,SAAzB,EACLyB,IADK,CACAjB,GAAG,IAAE;AACP,cAAIF,MAAM,GAACE,GAAG,CAACmB,IAAJ,CAASrB,MAApB;AACA,cAAIiB,KAAK,GAACf,GAAG,CAACmB,IAAJ,CAASJ,KAAnB;AACAN,UAAAA,YAAY,CAACyD,OAAb,CAAqB,SAArB,EAA+BrD,IAAI,CAACsD,SAAL,CAAe,EAAC,GAAGrE,MAAJ;AAAWiB,YAAAA;AAAX,WAAf,CAA/B;AACA,eAAKG,QAAL,CAAc;AACV/B,YAAAA,QAAQ,EAAC,IADC;AAEVU,YAAAA,IAAI,EAACC,MAAM,CAACD;AAFF,WAAd;AAIH,SATK,CAAN;AAUH;AACA,KAnR8C;;AAAA,SAqR/C0E,MArR+C,GAqRxC,MAAI;AACP9D,MAAAA,YAAY,CAACgD,KAAb;AACA,WAAKvC,QAAL,CAAc;AACV/B,QAAAA,QAAQ,EAAC;AADC,OAAd;AAGH,KA1R8C;;AAAA,SA4R/CqF,WA5R+C,GA4RnC,MAAMhC,CAAN,IAAU;AAClBA,MAAAA,CAAC,CAACK,cAAF;;AACA,YAAM5C,EAAE,GAACY,IAAI,CAACC,KAAL,CAAWL,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAX,EAA4CqC,GAArD;;AACA,YAAM/C,GAAG,GAAC;AACNX,QAAAA,SAAS,EAAC,KAAKb,KAAL,CAAWa,SADf;AAENC,QAAAA,QAAQ,EAAC,KAAKd,KAAL,CAAWc,QAFd;AAGNC,QAAAA,KAAK,EAAC,KAAKf,KAAL,CAAWe,KAHX;AAINC,QAAAA,QAAQ,EAAC,KAAKhB,KAAL,CAAWgB,QAJd;AAKNT,QAAAA,YAAY,EAAC,KAAKP,KAAL,CAAWO;AALlB,OAAV;AAOA,YAAMmB,GAAG,GAAC9B,KAAK,CAAC+B,MAAN,CAAa;AAACC,QAAAA,OAAO,EAAC;AAAT,OAAb,CAAV;AACAF,MAAAA,GAAG,CAACG,YAAJ,CAAiBC,OAAjB,CAAyBC,GAAzB,CAA8BC,GAAD,IAAO;AACpC,YAAGC,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAH,EAAmC;AAC/BF,UAAAA,GAAG,CAACG,OAAJ,CAAYC,aAAZ,GAA2B,UAASC,IAAI,CAACC,KAAL,CAAWL,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAX,EAA4CK,KAAM,EAAtF;AACH;;AACD,eAAOP,GAAP;AACH,OALG;AAMD,YAAMpC,KAAK,CAAC8E,GAAN,CAAU,wCAAsCjD,EAAhD,EAAmDD,GAAnD,EACJiB,IADI,CACEjB,GAAD,IAAO;AACL,aAAKkB,QAAL,CAAc;AACV7B,UAAAA,SAAS,EAAC,KAAKb,KAAL,CAAWa,SADX;AAEdC,UAAAA,QAAQ,EAAC,KAAKd,KAAL,CAAWc,QAFN;AAGdC,UAAAA,KAAK,EAAC,KAAKf,KAAL,CAAWe;AAHH,SAAd;AAKP,OAPI,CAAN;AASF,KAtT8C;AAAA;;AAuT3CkF,EAAAA,MAAM,GAAG;AACL,wBACI,QAAC,QAAD,CAAU,QAAV;AAAmB,MAAA,KAAK,EAAE,EAAC,GAAG,KAAKjG,KAAT;AAAeiF,QAAAA,KAAK,EAAC,KAAKA,KAA1B;AAAgCN,QAAAA,YAAY,EAAC,KAAKA,YAAlD;AACzBE,QAAAA,gBAAgB,EAAC,KAAKA,gBADG;AACcd,QAAAA,UAAU,EAAC,KAAKA,UAD9B;AAE1BmC,QAAAA,QAAQ,EAAC,KAAKA,QAFY;AAEHF,QAAAA,WAAW,EAAC,KAAKA,WAFd;AAE0BD,QAAAA,MAAM,EAAC,KAAKA,MAFtC;AAE6CD,QAAAA,YAAY,EAAC,KAAKA,YAF/D;AAE4EP,QAAAA,aAAa,EAAC,KAAKA,aAF/F;AAE6GM,QAAAA,UAAU,EAAC,KAAKA,UAF7H;AAEwID,QAAAA,eAAe,EAAC,KAAKA,eAF7J;AAE6KN,QAAAA,aAAa,EAAC,KAAKA,aAFhM;AAE8Mb,QAAAA,UAAU,EAAC,KAAKA,UAF9N;AAEyOS,QAAAA,UAAU,EAAC,KAAKA,UAFzP;AAEoQiB,QAAAA,QAAQ,EAAC,KAAKA,QAFlR;AAE2R/B,QAAAA,UAAU,EAAC,KAAKA,UAF3S;AAEsTiB,QAAAA,QAAQ,EAAC,KAAKA;AAFpU,OAA1B;AAAA,gBAGK,KAAKe,KAAL,CAAWC;AAHhB;AAAA;AAAA;AAAA;AAAA,YADJ;AAOH;;AA/T0C;AAkU/C,MAAMC,QAAQ,GAACzG,QAAQ,CAACyG,QAAxB;AACA,SAAQvG,OAAR,EAAgBuG,QAAhB","sourcesContent":["import React, { Component } from 'react'\r\nimport axios from 'axios'\r\n\r\n\r\nconst provider=React.createContext()\r\n\r\n\r\nexport default class Context extends Component {\r\n        state={\r\n            posts:[],\r\n            loading:true,\r\n            creator:'',\r\n            title:'',\r\n            message:'',\r\n            tags:'',\r\n            selectedfile:null,\r\n            clickedpost:false,\r\n            idmodi:null,\r\n            idpag:0,\r\n            issignin:false,\r\n            showpassword:false,\r\n            firstname:'',\r\n            lastname:'',\r\n            email:'',\r\n            password:'',\r\n            confirmpassword:'',\r\n            mazel:false,\r\n            signup:false,\r\n            imgsrc:'',\r\n            name:'',\r\n            result:''\r\n\r\n                    }\r\n\r\n collect= async ()=>{\r\n     const res={\r\n            id:this.state.idpag\r\n     }\r\n     const API=axios.create({baseURL:'http://localhost:8080/'})\r\n     API.interceptors.request.use((req)=>{\r\n         if(localStorage.getItem('profile')){\r\n             req.headers.authorization=`Bearer ${JSON.parse(localStorage.getItem('profile')).token}`\r\n         }\r\n         return req\r\n     })\r\n   await API.post('http://localhost:8080/posts/getPosts',res)\r\n    .then(res=>{\r\n        this.setState({\r\n            posts:res.data,\r\n            loading:false\r\n        })\r\n       })\r\n    .catch(err=>console.log(err))\r\n   \r\n    \r\n}\r\ncomponentDidMount=()=>{\r\n    this.collect()\r\nconst x=localStorage.getItem('profile')\r\nif (x!=null ){\r\n    this.setState({\r\n        issignin:true,\r\n        imgsrc:JSON.parse(x).imageUrl,\r\n        name:JSON.parse(x).name,\r\n        lastname:JSON.parse(x).name.split(\" \")[0],\r\n        firstname:JSON.parse(x).name.split(\" \")[1],\r\n        email:JSON.parse(x).email\r\n    })\r\n}\r\n\r\n    }\r\nconvertobas64=(file)=>{\r\n\r\n        return (\r\n            new Promise(function (resolve, reject) {\r\n             let reader = new FileReader();\r\n             reader.onload = function () { resolve(reader.result); };\r\n             reader.onerror = function (error) { reject(error); };\r\n             reader.readAsDataURL(file);\r\n             \r\n         }))\r\n}\r\n\r\nhandlefile= async (e)=>{\r\n    const file=e.target.files[0]\r\n    const base64= await this.convertobas64(file)\r\n    this.setState({\r\n        selectedfile:base64\r\n       })\r\n}\r\nshowupdate=(e,id)=>{\r\n    e.preventDefault()\r\n    const post=this.state.posts.filter((res)=>res._id==id)[0]\r\n    this.setState({\r\n        creator:post.creator,\r\n        title:post.title,\r\n        message:post.message,\r\n        tags:post.tags,\r\n        clickedpost:!this.state.clickedpost,\r\n        idmodi:id,\r\n        selectedfile:post.selectedfile\r\n    })\r\n    console.log(\"slice\"+this.state.slicepost)\r\n    console.log(this.state.posts)\r\n\r\n}\r\nupdatepost=async(e,x)=>{\r\n    e.preventDefault()\r\n    const res={\r\n        creator:this.state.creator,\r\n        title:this.state.title,\r\n        message:this.state.message,\r\n        tags:this.state.tags,\r\n        selectedfile:this.state.selectedfile\r\n    }\r\n    const API=axios.create({baseURL:'http://localhost:8080/'})\r\nAPI.interceptors.request.use((req)=>{\r\n    if(localStorage.getItem('profile')){\r\n        req.headers.authorization=`Bearer ${JSON.parse(localStorage.getItem('profile')).token}`\r\n    }\r\n    return req\r\n})\r\n   await axios.put('http://localhost:8080/posts/update/'+x,{...res,name:JSON.parse(localStorage.getItem('profile')).name})\r\n    .then(()=>{\r\n            this.setState({\r\n                        clickedpost:false\r\n            },()=>this.collect())\r\n    })\r\n\r\n}\r\n\r\nhandlechange=(e)=>{\r\n         e.preventDefault()\r\n        const name =e.target.name\r\n        const value=e.target.value\r\n        this.setState({\r\n         [name]:value\r\n        })\r\n    }\r\n\r\nhandlesubmitpost=async(e,x)=>{\r\n  e.preventDefault()\r\n   const user=JSON.parse(localStorage.getItem('profile'))\r\n    const res={\r\n        creator:(user?._id || user?.googleId),\r\n        title:this.state.title,\r\n        message:this.state.message,\r\n        tags:[this.state.tags],\r\n        selectedfile:this.state.selectedfile\r\n    }\r\n    const API=axios.create({baseURL:'http://localhost:8080/'})\r\nAPI.interceptors.request.use((req)=>{\r\n    if(localStorage.getItem('profile')){\r\n        req.headers.authorization=`Bearer ${JSON.parse(localStorage.getItem('profile')).token}`\r\n    }\r\n    return req\r\n})\r\n\r\n    await API.post('http://localhost:8080/posts/createdpost',{...res,name:JSON.parse(localStorage.getItem('profile')).name})\r\n    .then(setTimeout(() => {this.collect()\r\n    },1500))\r\n    .catch(console.log('error'))\r\n   \r\n   } \r\n\r\nclear=(e)=>{\r\n       e.preventDefault()\r\n       this.setState({\r\n        creator:'',\r\n        title:'',\r\n        message:'',\r\n        tags:'',\r\n        selectedfile:'',\r\n       })\r\n   }\r\ndeletepost=async(e,id)=>{\r\n    e.preventDefault()\r\n    const API=axios.create({baseURL:'http://localhost:8080/'})\r\nAPI.interceptors.request.use((req)=>{\r\n    if(localStorage.getItem('profile')){\r\n        req.headers.authorization=`Bearer ${JSON.parse(localStorage.getItem('profile')).token}`\r\n    }\r\n    return req\r\n})\r\n    await axios.delete('http://localhost:8080/posts/delete/'+id)\r\n    .then(setTimeout(() => {this.collect()\r\n    },1500))\r\n    .then(err=>console.log(err))\r\n    if (this.state.posts.length) {\r\n        this.setState({\r\n            idpag:0\r\n        })\r\n    }\r\n}\r\n\r\nlikepost=async(e,id)=>{\r\n    e.preventDefault()\r\n    const API=axios.create({baseURL:'http://localhost:8080/'})\r\nAPI.interceptors.request.use((req)=>{\r\n    if(localStorage.getItem('profile')){\r\n        req.headers.authorization=`Bearer ${JSON.parse(localStorage.getItem('profile')).token}`\r\n    }\r\n    return req\r\n})\r\n    await API.put('http://localhost:8080/posts/likepost/'+id)\r\n    .then(setTimeout(() => {this.collect()\r\n    },1500))\r\n}\r\n\r\ngooglefailure=()=>{\r\n    console.log('try again later')\r\n}\r\ngooglesuccess=async(res)=>{\r\n    const result=res?.profileObj\r\n    const token=res?.tokenId\r\n    try {\r\n     await localStorage.setItem('profile',JSON.stringify({...result,token}))\r\n      this.setState({\r\n        issignin:true,\r\n        name:JSON.parse(localStorage.getItem('profile')).name,\r\n        imgsrc:JSON.parse(localStorage.getItem('profile')).imageUrl\r\n    })\r\n    } catch (error) {\r\n        console.log(error)\r\n    }\r\n\r\n}\r\n\r\nsetshowpassword=()=>{\r\n    this.setState({\r\n        showpassword:!this.state.showpassword\r\n    })\r\n}\r\n\r\nswitchmode=()=>{\r\n    this.setState({\r\n        signup:!this.state.signup,\r\n\r\n    })\r\n}\r\n\r\nhandlesubmit=async (e)=>{\r\ne.preventDefault()\r\nconst {email,password,firstname,lastname,confirmpassword}=this.state\r\nif(this.state.signup){\r\n    const API=axios.create({baseURL:'http://localhost:8080'})\r\n        API.interceptors.request.use((req)=>{\r\n            if(localStorage.getItem('profile')){\r\n                req.headers.authorization=`Bearer ${JSON.parse(localStorage.getItem('profile')).token}`\r\n            }\r\n            return req\r\n        })\r\n    await API.post('/users/signup',{email,password,firstname,lastname,confirmpassword})\r\n    .then(res=>{\r\n        let result=res.data.result\r\n        let token=res.data.token\r\n        localStorage.setItem('profile',JSON.stringify({...result,token}))\r\n        this.setState({\r\n            issignin:true,\r\n            name:result.name\r\n        })\r\n    })\r\n\r\n}else{\r\n    const API=axios.create({baseURL:'http://localhost:8080'})\r\nAPI.interceptors.request.use((req)=>{\r\n    if(localStorage.getItem('profile')){\r\n        req.headers.authorization=`Bearer ${JSON.parse(localStorage.getItem('profile')).token}`\r\n    }\r\n    return req\r\n})\r\n    await API.post('/users/signin',{email,password})\r\n    .then(res=>{\r\n        let result=res.data.result\r\n        let token=res.data.token\r\n        localStorage.setItem('profile',JSON.stringify({...result,token}))\r\n        this.setState({\r\n            issignin:true,\r\n            name:result.name\r\n        })\r\n    })\r\n}\r\n}\r\n\r\nlogout=()=>{\r\n    localStorage.clear()\r\n    this.setState({\r\n        issignin:false\r\n    })\r\n}\r\n\r\neditprofile=async(e)=>{\r\n    e.preventDefault()\r\n    const id=JSON.parse(localStorage.getItem('profile'))._id\r\n    const res={\r\n        firstname:this.state.firstname,\r\n        lastname:this.state.lastname,\r\n        email:this.state.email,\r\n        password:this.state.password,\r\n        selectedfile:this.state.selectedfile\r\n    }\r\n    const API=axios.create({baseURL:'http://localhost:8080/'})\r\n    API.interceptors.request.use((req)=>{\r\n    if(localStorage.getItem('profile')){\r\n        req.headers.authorization=`Bearer ${JSON.parse(localStorage.getItem('profile')).token}`\r\n    }\r\n    return req\r\n})\r\n   await axios.put('http://localhost:8080/users/update/'+id,res)\r\n    .then((res)=>{\r\n            this.setState({\r\n                firstname:this.state.firstname,\r\n            lastname:this.state.lastname,\r\n            email:this.state.email,     \r\n            })\r\n    })\r\n\r\n}\r\n    render() {\r\n        return (\r\n            <provider.Provider value={{...this.state,clear:this.clear,handlechange:this.handlechange\r\n            ,handlesubmitpost:this.handlesubmitpost,handlefile:this.handlefile,\r\n            precpage:this.precpage,editprofile:this.editprofile,logout:this.logout,handlesubmit:this.handlesubmit,googlesuccess:this.googlesuccess,switchmode:this.switchmode,setshowpassword:this.setshowpassword,googlefailure:this.googlefailure,updatepost:this.updatepost,deletepost:this.deletepost,nextpage:this.nextpage,showupdate:this.showupdate,likepost:this.likepost}}>\r\n                {this.props.children}\r\n            </provider.Provider>\r\n        )\r\n    }\r\n}\r\n\r\nconst Consumer=provider.Consumer\r\nexport {Context,Consumer}"]},"metadata":{},"sourceType":"module"}