{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\U-Poste\\\\Desktop\\\\projet web avance-MERN\\\\client\\\\src\\\\context.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst provider = /*#__PURE__*/React.createContext();\nexport default class Context extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      posts: [],\n      loading: true,\n      creator: '',\n      title: '',\n      message: '',\n      tags: '',\n      selectedfile: null,\n      clickedpost: false,\n      idmodi: null,\n      idpag: 0,\n      issignin: false,\n      showpassword: false,\n      firstname: '',\n      lastname: '',\n      email: '',\n      password: '',\n      confirmpassword: '',\n      mazel: false,\n      signup: false,\n      imgsrc: '',\n      name: '',\n      comment: '',\n      idcomment: '',\n      getcomment: [],\n      loadingcmnt: false\n    };\n\n    this.collect = async () => {\n      const API = axios.create({\n        baseURL: 'http://localhost:8080/'\n      });\n      API.interceptors.request.use(req => {\n        if (localStorage.getItem('profile')) {\n          req.headers.authorization = `Bearer ${JSON.parse(localStorage.getItem('profile')).token}`;\n        }\n\n        return req;\n      });\n      await API.get('http://localhost:8080/posts/getposts').then(res => {\n        this.setState({\n          posts: res.data,\n          loading: false\n        });\n      }).catch(err => console.log(err));\n    };\n\n    this.componentDidMount = () => {\n      this.collect();\n      const x = localStorage.getItem('profile');\n\n      if (x != null) {\n        this.setState({\n          issignin: true,\n          imgsrc: JSON.parse(x).imageUrl,\n          name: JSON.parse(x).name,\n          lastname: JSON.parse(x).name.split(\" \")[0],\n          firstname: JSON.parse(x).name.split(\" \")[1],\n          email: JSON.parse(x).email\n        });\n      }\n    };\n\n    this.convertobas64 = file => {\n      return new Promise(function (resolve, reject) {\n        let reader = new FileReader();\n\n        reader.onload = function () {\n          resolve(reader.result);\n        };\n\n        reader.onerror = function (error) {\n          reject(error);\n        };\n\n        reader.readAsDataURL(file);\n      });\n    };\n\n    this.handlefile = async e => {\n      const file = e.target.files[0];\n      const base64 = await this.convertobas64(file);\n      this.setState({\n        selectedfile: base64\n      });\n    };\n\n    this.showupdate = (e, id) => {\n      e.preventDefault();\n      const post = this.state.posts.filter(res => res._id == id)[0];\n      this.setState({\n        creator: post.creator,\n        title: post.title,\n        message: post.message,\n        tags: post.tags,\n        clickedpost: !this.state.clickedpost,\n        idmodi: id,\n        selectedfile: post.selectedfile\n      });\n    };\n\n    this.updatepost = async (e, x) => {\n      e.preventDefault();\n      const res = {\n        creator: this.state.creator,\n        title: this.state.title,\n        message: this.state.message,\n        tags: this.state.tags,\n        selectedfile: this.state.selectedfile\n      };\n      const API = axios.create({\n        baseURL: 'http://localhost:8080/'\n      });\n      API.interceptors.request.use(req => {\n        if (localStorage.getItem('profile')) {\n          req.headers.authorization = `Bearer ${JSON.parse(localStorage.getItem('profile')).token}`;\n        }\n\n        return req;\n      });\n      await axios.put('http://localhost:8080/posts/update/' + x, { ...res,\n        name: JSON.parse(localStorage.getItem('profile')).name\n      }).then(() => {\n        this.setState({\n          clickedpost: false\n        }, () => this.collect());\n      });\n    };\n\n    this.handlechange = e => {\n      e.preventDefault();\n      const name = e.target.name;\n      const value = e.target.value;\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.handlesubmitpost = async (e, x) => {\n      e.preventDefault();\n      const user = JSON.parse(localStorage.getItem('profile'));\n      const res = {\n        creator: (user === null || user === void 0 ? void 0 : user._id) || (user === null || user === void 0 ? void 0 : user.googleId),\n        title: this.state.title,\n        message: this.state.message,\n        tags: [this.state.tags],\n        selectedfile: this.state.selectedfile\n      };\n      const API = axios.create({\n        baseURL: 'http://localhost:8080/'\n      });\n      API.interceptors.request.use(req => {\n        if (localStorage.getItem('profile')) {\n          req.headers.authorization = `Bearer ${user.token}`;\n        }\n\n        return req;\n      });\n      await API.post('http://localhost:8080/posts/createdpost', { ...res,\n        name: user.name\n      }).then(setTimeout(() => {\n        this.collect();\n      }, 1500)).catch(console.log('error'));\n    };\n\n    this.clear = e => {\n      e.preventDefault();\n      this.setState({\n        creator: '',\n        title: '',\n        message: '',\n        tags: '',\n        selectedfile: ''\n      });\n    };\n\n    this.deletepost = async (e, id) => {\n      e.preventDefault();\n      const API = axios.create({\n        baseURL: 'http://localhost:8080/'\n      });\n      API.interceptors.request.use(req => {\n        if (localStorage.getItem('profile')) {\n          req.headers.authorization = `Bearer ${JSON.parse(localStorage.getItem('profile')).token}`;\n        }\n\n        return req;\n      });\n      await axios.delete('http://localhost:8080/posts/delete/' + id).then(setTimeout(() => {\n        this.collect();\n      }, 1500)).then(err => console.log(err));\n\n      if (this.state.posts.length) {\n        this.setState({\n          idpag: 0\n        });\n      }\n    };\n\n    this.likepost = async (e, id) => {\n      e.preventDefault();\n      const client = JSON.parse(localStorage.getItem('profile'));\n      const user = {\n        userid: (client === null || client === void 0 ? void 0 : client._id) || (client === null || client === void 0 ? void 0 : client.googleId)\n      };\n      const API = axios.create({\n        baseURL: 'http://localhost:8080/'\n      });\n      API.interceptors.request.use(req => {\n        if (localStorage.getItem('profile')) {\n          req.headers.authorization = `Bearer ${JSON.parse(localStorage.getItem('profile')).token}`;\n        }\n\n        return req;\n      });\n      await API.put('http://localhost:8080/posts/likepost/' + id, user).then(setTimeout(() => {\n        this.collect();\n      }, 1500));\n    };\n\n    this.googlefailure = () => {\n      console.log('try again later');\n    };\n\n    this.googlesuccess = async res => {\n      const result = res === null || res === void 0 ? void 0 : res.profileObj;\n      const token = res === null || res === void 0 ? void 0 : res.tokenId;\n\n      try {\n        await localStorage.setItem('profile', JSON.stringify({ ...result,\n          token\n        }));\n        this.setState({\n          issignin: true,\n          name: JSON.parse(localStorage.getItem('profile')).name,\n          imgsrc: JSON.parse(localStorage.getItem('profile')).imageUrl\n        });\n      } catch (error) {\n        console.log(error);\n      }\n    };\n\n    this.setshowpassword = () => {\n      this.setState({\n        showpassword: !this.state.showpassword\n      });\n    };\n\n    this.switchmode = () => {\n      this.setState({\n        signup: !this.state.signup\n      });\n    };\n\n    this.handlesubmit = async e => {\n      e.preventDefault();\n      const {\n        email,\n        password,\n        firstname,\n        lastname,\n        confirmpassword\n      } = this.state;\n\n      if (this.state.signup) {\n        const API = axios.create({\n          baseURL: 'http://localhost:8080'\n        });\n        API.interceptors.request.use(req => {\n          if (localStorage.getItem('profile')) {\n            req.headers.authorization = `Bearer ${JSON.parse(localStorage.getItem('profile')).token}`;\n          }\n\n          return req;\n        });\n        await API.post('/users/signup', {\n          email,\n          password,\n          firstname,\n          lastname,\n          confirmpassword\n        });\n        window.location = '/auth';\n      } else {\n        const API = axios.create({\n          baseURL: 'http://localhost:8080'\n        });\n        API.interceptors.request.use(req => {\n          if (localStorage.getItem('profile')) {\n            req.headers.authorization = `Bearer ${JSON.parse(localStorage.getItem('profile')).token}`;\n          }\n\n          return req;\n        });\n        await API.post('/users/signin', {\n          email,\n          password\n        }).then(res => {\n          let result = res.data.result;\n          let token = res.data.token;\n          localStorage.setItem('profile', JSON.stringify({ ...result,\n            token\n          }));\n          this.setState({\n            issignin: true,\n            name: result.name,\n            imgsrc: result.imageUrl,\n            name: result.name,\n            lastname: result.name.split(\" \")[0],\n            firstname: result.name.split(\" \")[1],\n            email: result.email\n          });\n          console.log(res.data.message);\n        });\n      }\n    };\n\n    this.logout = () => {\n      localStorage.clear();\n      this.setState({\n        issignin: false\n      });\n    };\n\n    this.editprofile = async e => {\n      e.preventDefault();\n\n      const id = JSON.parse(localStorage.getItem('profile'))._id;\n\n      const token = JSON.parse(localStorage.getItem('profile')).token;\n      const res = {\n        firstname: this.state.firstname,\n        lastname: this.state.lastname,\n        password: this.state.password,\n        imageUrl: this.state.selectedfile\n      };\n      const API = axios.create({\n        baseURL: 'http://localhost:8080/'\n      });\n      API.interceptors.request.use(req => {\n        if (localStorage.getItem('profile')) {\n          req.headers.authorization = `Bearer ${JSON.parse(localStorage.getItem('profile')).token}`;\n        }\n\n        return req;\n      });\n      localStorage.clear();\n      await axios.put('http://localhost:8080/users/update/' + id, res).then(res => {\n        localStorage.setItem('profile', JSON.stringify({ ...res.data.result,\n          token\n        }));\n        this.setState({\n          firstname: res.data.firstname,\n          lastname: res.data.lastname,\n          email: res.data.email,\n          imgsrc: res.data.selectedfile\n        });\n        window.location = '/';\n      });\n    };\n\n    this.comment = (e, id) => {\n      e.preventDefault();\n      this.setState({\n        idcomment: id\n      }, () => this.showcomment());\n    };\n\n    this.showcomment = async () => {\n      const API = axios.create({\n        baseURL: 'http://localhost:8080/'\n      });\n      API.interceptors.request.use(req => {\n        if (localStorage.getItem('profile')) {\n          req.headers.authorization = `Bearer ${JSON.parse(localStorage.getItem('profile')).token}`;\n        }\n\n        return req;\n      });\n      await API.get('http://localhost:8080/comment/getcomment/' + this.state.idcomment).then(res => this.setState({\n        getcomment: res.data,\n        loadingcmnt: true\n      }));\n    };\n\n    this.postcomment = async e => {\n      e.preventDefault();\n      const user = JSON.parse(localStorage.getItem('profile'));\n      const res = {\n        comment: this.state.comment,\n        name: user.name,\n        imageUrl: user.imageUrl,\n        idphoto: this.state.idcomment\n      };\n      const API = axios.create({\n        baseURL: 'http://localhost:8080/'\n      });\n      API.interceptors.request.use(req => {\n        if (localStorage.getItem('profile')) {\n          req.headers.authorization = `Bearer ${user.token}`;\n        }\n\n        return req;\n      });\n      await API.post('http://localhost:8080/comment/postcomment/' + this.state.idcomment, res).then(this.setState({\n        loadingcmnt: false\n      }), this.showcomment());\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(provider.Provider, {\n      value: { ...this.state,\n        clear: this.clear,\n        handlechange: this.handlechange,\n        handlesubmitpost: this.handlesubmitpost,\n        handlefile: this.handlefile,\n        precpage: this.precpage,\n        postcomment: this.postcomment,\n        editprofile: this.editprofile,\n        comment: this.comment,\n        logout: this.logout,\n        handlesubmit: this.handlesubmit,\n        googlesuccess: this.googlesuccess,\n        switchmode: this.switchmode,\n        setshowpassword: this.setshowpassword,\n        googlefailure: this.googlefailure,\n        updatepost: this.updatepost,\n        deletepost: this.deletepost,\n        nextpage: this.nextpage,\n        showupdate: this.showupdate,\n        likepost: this.likepost\n      },\n      children: this.props.children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 379,\n      columnNumber: 13\n    }, this);\n  }\n\n}\nconst Consumer = provider.Consumer;\nexport { Context, Consumer };","map":{"version":3,"sources":["C:/Users/U-Poste/Desktop/projet web avance-MERN/client/src/context.js"],"names":["React","Component","axios","provider","createContext","Context","state","posts","loading","creator","title","message","tags","selectedfile","clickedpost","idmodi","idpag","issignin","showpassword","firstname","lastname","email","password","confirmpassword","mazel","signup","imgsrc","name","comment","idcomment","getcomment","loadingcmnt","collect","API","create","baseURL","interceptors","request","use","req","localStorage","getItem","headers","authorization","JSON","parse","token","get","then","res","setState","data","catch","err","console","log","componentDidMount","x","imageUrl","split","convertobas64","file","Promise","resolve","reject","reader","FileReader","onload","result","onerror","error","readAsDataURL","handlefile","e","target","files","base64","showupdate","id","preventDefault","post","filter","_id","updatepost","put","handlechange","value","handlesubmitpost","user","googleId","setTimeout","clear","deletepost","delete","length","likepost","client","userid","googlefailure","googlesuccess","profileObj","tokenId","setItem","stringify","setshowpassword","switchmode","handlesubmit","window","location","logout","editprofile","showcomment","postcomment","idphoto","render","precpage","nextpage","props","children","Consumer"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport axios from 'axios'\r\n\r\n\r\nconst provider=React.createContext()\r\n\r\n\r\nexport default class Context extends Component {\r\nstate={\r\n            posts:[],\r\n            loading:true,\r\n            creator:'',\r\n            title:'',\r\n            message:'',\r\n            tags:'',\r\n            selectedfile:null,\r\n            clickedpost:false,\r\n            idmodi:null,\r\n            idpag:0,\r\n            issignin:false,\r\n            showpassword:false,\r\n            firstname:'',\r\n            lastname:'',\r\n            email:'',\r\n            password:'',\r\n            confirmpassword:'',\r\n            mazel:false,\r\n            signup:false,\r\n            imgsrc:'',\r\n            name:'',\r\n            comment:'',\r\n            idcomment:'',\r\n            getcomment:[],\r\n            loadingcmnt:false\r\n\r\n}\r\n\r\ncollect= async ()=>{\r\n\r\n     const API=axios.create({baseURL:'http://localhost:8080/'})\r\n     API.interceptors.request.use((req)=>{\r\n         if(localStorage.getItem('profile')){\r\n             req.headers.authorization=`Bearer ${JSON.parse(localStorage.getItem('profile')).token}`\r\n         }\r\n         return req\r\n     })\r\n   await API.get('http://localhost:8080/posts/getposts')\r\n    .then(res=>{\r\n        this.setState({\r\n            posts:res.data,\r\n            loading:false\r\n        })\r\n       })\r\n    .catch(err=>console.log(err))\r\n\r\n   \r\n    \r\n}\r\n\r\ncomponentDidMount=()=>{\r\nthis.collect()\r\nconst x=localStorage.getItem('profile')\r\nif (x!=null ){\r\n    this.setState({\r\n        issignin:true,\r\n        imgsrc:JSON.parse(x).imageUrl,\r\n        name:JSON.parse(x).name,\r\n        lastname:JSON.parse(x).name.split(\" \")[0],\r\n        firstname:JSON.parse(x).name.split(\" \")[1],\r\n        email:JSON.parse(x).email\r\n    })\r\n}\r\n\r\n}\r\n\r\nconvertobas64=(file)=>{\r\n\r\n        return (\r\n            new Promise(function (resolve, reject) {\r\n             let reader = new FileReader();\r\n             reader.onload = function () { resolve(reader.result); };\r\n             reader.onerror = function (error) { reject(error); };\r\n             reader.readAsDataURL(file);\r\n             \r\n         }))\r\n}\r\n\r\nhandlefile= async (e)=>{\r\n    const file=e.target.files[0]\r\n    const base64= await this.convertobas64(file)\r\n    this.setState({\r\n        selectedfile:base64\r\n       })\r\n}\r\n\r\nshowupdate=(e,id)=>{\r\n    e.preventDefault()\r\n    const post=this.state.posts.filter((res)=>res._id==id)[0]\r\n    this.setState({\r\n        creator:post.creator,\r\n        title:post.title,\r\n        message:post.message,\r\n        tags:post.tags,\r\n        clickedpost:!this.state.clickedpost,\r\n        idmodi:id,\r\n        selectedfile:post.selectedfile\r\n    })\r\n\r\n}\r\n\r\nupdatepost=async(e,x)=>{\r\n    e.preventDefault()\r\n    const res={\r\n        creator:this.state.creator,\r\n        title:this.state.title,\r\n        message:this.state.message,\r\n        tags:this.state.tags,\r\n        selectedfile:this.state.selectedfile\r\n    }\r\n    const API=axios.create({baseURL:'http://localhost:8080/'})\r\nAPI.interceptors.request.use((req)=>{\r\n    if(localStorage.getItem('profile')){\r\n        req.headers.authorization=`Bearer ${JSON.parse(localStorage.getItem('profile')).token}`\r\n    }\r\n    return req\r\n})\r\n   await axios.put('http://localhost:8080/posts/update/'+x,{...res,name:JSON.parse(localStorage.getItem('profile')).name})\r\n    .then(()=>{\r\n            this.setState({\r\n                        clickedpost:false\r\n            },()=>this.collect())\r\n    })\r\n\r\n}\r\n\r\nhandlechange=(e)=>{\r\n         e.preventDefault()\r\n        const name =e.target.name\r\n        const value=e.target.value\r\n        this.setState({\r\n         [name]:value\r\n        })\r\n}\r\n\r\nhandlesubmitpost=async(e,x)=>{\r\n  e.preventDefault()\r\n   const user=JSON.parse(localStorage.getItem('profile'))\r\n    const res={\r\n        creator:(user?._id || user?.googleId),\r\n        title:this.state.title,\r\n        message:this.state.message,\r\n        tags:[this.state.tags],\r\n        selectedfile:this.state.selectedfile\r\n    }\r\n    const API=axios.create({baseURL:'http://localhost:8080/'})\r\n    API.interceptors.request.use((req)=>{\r\n    if(localStorage.getItem('profile')){\r\n        req.headers.authorization=`Bearer ${user.token}`\r\n    }\r\n    return req\r\n})\r\n\r\n    await API.post('http://localhost:8080/posts/createdpost',{...res,name:user.name})\r\n    .then(setTimeout(() => {this.collect()\r\n    },1500))\r\n    .catch(console.log('error'))\r\n   \r\n} \r\n\r\nclear=(e)=>{\r\n       e.preventDefault()\r\n       this.setState({\r\n        creator:'',\r\n        title:'',\r\n        message:'',\r\n        tags:'',\r\n        selectedfile:'',\r\n       })\r\n}\r\n\r\ndeletepost=async(e,id)=>{\r\n    e.preventDefault()\r\n    const API=axios.create({baseURL:'http://localhost:8080/'})\r\nAPI.interceptors.request.use((req)=>{\r\n    if(localStorage.getItem('profile')){\r\n        req.headers.authorization=`Bearer ${JSON.parse(localStorage.getItem('profile')).token}`\r\n    }\r\n    return req\r\n})\r\n    await axios.delete('http://localhost:8080/posts/delete/'+id)\r\n    .then(setTimeout(() => {this.collect()\r\n    },1500))\r\n    .then(err=>console.log(err))\r\n    if (this.state.posts.length) {\r\n        this.setState({\r\n            idpag:0\r\n        })\r\n    }\r\n}\r\n\r\nlikepost=async(e,id)=>{\r\n    e.preventDefault()\r\n    const client=JSON.parse(localStorage.getItem('profile'))\r\n    const user={\r\n            userid: client?._id || client?.googleId\r\n    }\r\n    const API=axios.create({baseURL:'http://localhost:8080/'})\r\n    API.interceptors.request.use((req)=>{\r\n    if(localStorage.getItem('profile')){\r\n        req.headers.authorization=`Bearer ${JSON.parse(localStorage.getItem('profile')).token}`\r\n    }\r\n    return req\r\n})\r\n    await API.put('http://localhost:8080/posts/likepost/'+id,user)\r\n    .then(setTimeout(() => {this.collect()\r\n    },1500))\r\n}\r\n\r\ngooglefailure=()=>{\r\n    console.log('try again later')\r\n}\r\n\r\ngooglesuccess=async(res)=>{\r\n    const result=res?.profileObj\r\n    const token=res?.tokenId\r\n    try {\r\n     await localStorage.setItem('profile',JSON.stringify({...result,token}))\r\n      this.setState({\r\n        issignin:true,\r\n        name:JSON.parse(localStorage.getItem('profile')).name,\r\n        imgsrc:JSON.parse(localStorage.getItem('profile')).imageUrl\r\n    })\r\n    } catch (error) {\r\n        console.log(error)\r\n    }\r\n\r\n}\r\n\r\nsetshowpassword=()=>{\r\n    this.setState({\r\n        showpassword:!this.state.showpassword\r\n    })\r\n}\r\n\r\nswitchmode=()=>{\r\n    this.setState({\r\n        signup:!this.state.signup,\r\n\r\n    })\r\n}\r\n\r\nhandlesubmit=async (e)=>{\r\ne.preventDefault()\r\nconst {email,password,firstname,lastname,confirmpassword}=this.state\r\nif(this.state.signup){\r\n    const API=axios.create({baseURL:'http://localhost:8080'})\r\n        API.interceptors.request.use((req)=>{\r\n            if(localStorage.getItem('profile')){\r\n                req.headers.authorization=`Bearer ${JSON.parse(localStorage.getItem('profile')).token}`\r\n            }\r\n            return req\r\n        })\r\n    await API.post('/users/signup',{email,password,firstname,lastname,confirmpassword})\r\n    window.location='/auth'\r\n}else{\r\n    const API=axios.create({baseURL:'http://localhost:8080'})\r\nAPI.interceptors.request.use((req)=>{\r\n    if(localStorage.getItem('profile')){\r\n        req.headers.authorization=`Bearer ${JSON.parse(localStorage.getItem('profile')).token}`\r\n    }\r\n    return req\r\n})\r\n    await API.post('/users/signin',{email,password})\r\n    .then(res=>{\r\n        let result=res.data.result\r\n        let token=res.data.token\r\n        localStorage.setItem('profile',JSON.stringify({...result,token}))\r\n        this.setState({\r\n            issignin:true,\r\n            name:result.name,\r\n            imgsrc:result.imageUrl,\r\n            name:result.name,\r\n            lastname:result.name.split(\" \")[0],\r\n            firstname:result.name.split(\" \")[1],\r\n            email:result.email\r\n         })\r\n         console.log(res.data.message)\r\n    })\r\n}\r\n}\r\n\r\nlogout=()=>{\r\n    localStorage.clear()\r\n    this.setState({\r\n        issignin:false\r\n    })\r\n}\r\n\r\neditprofile=async(e)=>{\r\n    e.preventDefault()\r\n    const id=JSON.parse(localStorage.getItem('profile'))._id\r\n    const token=JSON.parse(localStorage.getItem('profile')).token\r\n    const res={\r\n        firstname:this.state.firstname,\r\n        lastname:this.state.lastname,\r\n        password:this.state.password,\r\n        imageUrl:this.state.selectedfile\r\n    }\r\n    const API=axios.create({baseURL:'http://localhost:8080/'})\r\n    API.interceptors.request.use((req)=>{\r\n    if(localStorage.getItem('profile')){\r\n        req.headers.authorization=`Bearer ${JSON.parse(localStorage.getItem('profile')).token}`\r\n    }\r\n    return req\r\n})\r\n   localStorage.clear()\r\n   await axios.put('http://localhost:8080/users/update/'+id,res)\r\n    .then((res)=>{\r\n            localStorage.setItem('profile',JSON.stringify({...res.data.result,token}))\r\n            this.setState({\r\n                firstname:res.data.firstname,\r\n                lastname:res.data.lastname,\r\n                email:res.data.email,\r\n                imgsrc:res.data.selectedfile\r\n            })\r\n            window.location='/'\r\n        })\r\n\r\n}\r\n\r\ncomment=(e,id)=>{\r\n    e.preventDefault()\r\n    this.setState({\r\n        idcomment:id\r\n    },()=>this.showcomment())\r\n}\r\n\r\nshowcomment=async()=>{\r\n    const API=axios.create({baseURL:'http://localhost:8080/'})\r\n    API.interceptors.request.use((req)=>{\r\n    if(localStorage.getItem('profile')){\r\n        req.headers.authorization=`Bearer ${JSON.parse(localStorage.getItem('profile')).token}`\r\n    }\r\n    return req\r\n})\r\n    await API.get('http://localhost:8080/comment/getcomment/'+this.state.idcomment)\r\n    .then(res=>this.setState({\r\n        getcomment:res.data,\r\n        loadingcmnt:true\r\n    }))\r\n\r\n}\r\n\r\npostcomment=async(e)=>{\r\n    e.preventDefault()\r\n    const user=JSON.parse(localStorage.getItem('profile'))\r\n    const res={\r\n        comment:this.state.comment,\r\n        name:user.name,\r\n        imageUrl:user.imageUrl,\r\n        idphoto:this.state.idcomment\r\n    }\r\n    const API=axios.create({baseURL:'http://localhost:8080/'})\r\n    API.interceptors.request.use((req)=>{\r\n        if(localStorage.getItem('profile')){\r\n            req.headers.authorization=`Bearer ${user.token}`\r\n        }\r\n        return req\r\n    })\r\n        await API.post('http://localhost:8080/comment/postcomment/'+this.state.idcomment,res)\r\n        .then(this.setState({\r\n            loadingcmnt:false\r\n        }), this.showcomment())\r\n       \r\n}\r\n\r\nrender() {\r\n        return (\r\n            <provider.Provider value={{...this.state,clear:this.clear,handlechange:this.handlechange\r\n            ,handlesubmitpost:this.handlesubmitpost,handlefile:this.handlefile,\r\n            precpage:this.precpage,postcomment:this.postcomment,editprofile:this.editprofile,comment:this.comment,logout:this.logout,handlesubmit:this.handlesubmit,googlesuccess:this.googlesuccess,switchmode:this.switchmode,setshowpassword:this.setshowpassword,googlefailure:this.googlefailure,updatepost:this.updatepost,deletepost:this.deletepost,nextpage:this.nextpage,showupdate:this.showupdate,likepost:this.likepost}}>\r\n                {this.props.children}\r\n            </provider.Provider>\r\n        )\r\n}\r\n\r\n}\r\n\r\n\r\n\r\nconst Consumer=provider.Consumer\r\nexport {Context,Consumer}"]},"metadata":{},"sourceType":"module"}