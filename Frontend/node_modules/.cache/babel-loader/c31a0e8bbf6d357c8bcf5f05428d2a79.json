{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\U-Poste\\\\Desktop\\\\projet web avance-MERN\\\\client\\\\src\\\\context.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst provider = /*#__PURE__*/React.createContext();\nexport default class Context extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      posts: [],\n      loading: true,\n      creator: '',\n      title: '',\n      message: '',\n      tags: '',\n      selectedfile: null,\n      clickedpost: false,\n      idmodi: null,\n      idpag: 0,\n      issignin: false,\n      showpassword: false,\n      firstname: '',\n      lastname: '',\n      email: '',\n      password: '',\n      confirmpassword: '',\n      mazel: false,\n      signup: false,\n      imgsrc: '',\n      name: ''\n    };\n\n    this.collect = async () => {\n      const res = {\n        id: this.state.idpag\n      };\n      const API = axios.create({\n        baseURL: 'http://localhost:8080/'\n      });\n      API.interceptors.request.use(req => {\n        if (localStorage.getItem('profile')) {\n          req.headers.authorization = `Bearer ${JSON.parse(localStorage.getItem('profile')).token}`;\n        }\n\n        return req;\n      });\n      await API.post('http://localhost:8080/posts/getPosts', res).then(res => {\n        this.setState({\n          posts: res.data,\n          loading: false\n        });\n      }).catch(err => console.log(err));\n    };\n\n    this.componentDidMount = () => {\n      this.collect();\n      const x = localStorage.getItem('profile');\n\n      if (x != null) {\n        this.setState({\n          issignin: true,\n          imgsrc: JSON.parse(x).imageUrl,\n          name: JSON.parse(x).name,\n          lastname: JSON.parse(x).name.split(\" \")[0],\n          firstname: JSON.parse(x).name.split(\" \")[1],\n          email: JSON.parse(x).email\n        });\n      }\n    };\n\n    this.convertobas64 = file => {\n      return new Promise(function (resolve, reject) {\n        let reader = new FileReader();\n\n        reader.onload = function () {\n          resolve(reader.result);\n        };\n\n        reader.onerror = function (error) {\n          reject(error);\n        };\n\n        reader.readAsDataURL(file);\n      });\n    };\n\n    this.handlefile = async e => {\n      const file = e.target.files[0];\n      const base64 = await this.convertobas64(file);\n      this.setState({\n        selectedfile: base64\n      });\n    };\n\n    this.showupdate = (e, id) => {\n      e.preventDefault();\n      const post = this.state.posts.filter(res => res._id == id)[0];\n      this.setState({\n        creator: post.creator,\n        title: post.title,\n        message: post.message,\n        tags: post.tags,\n        clickedpost: !this.state.clickedpost,\n        idmodi: id,\n        selectedfile: post.selectedfile\n      });\n      console.log(\"slice\" + this.state.slicepost);\n      console.log(this.state.posts);\n    };\n\n    this.updatepost = async (e, x) => {\n      e.preventDefault();\n      const res = {\n        creator: this.state.creator,\n        title: this.state.title,\n        message: this.state.message,\n        tags: this.state.tags,\n        selectedfile: this.state.selectedfile\n      };\n      const API = axios.create({\n        baseURL: 'http://localhost:8080/'\n      });\n      API.interceptors.request.use(req => {\n        if (localStorage.getItem('profile')) {\n          req.headers.authorization = `Bearer ${JSON.parse(localStorage.getItem('profile')).token}`;\n        }\n\n        return req;\n      });\n      await axios.put('http://localhost:8080/posts/update/' + x, { ...res,\n        name: JSON.parse(localStorage.getItem('profile')).name\n      }).then(() => {\n        this.setState({\n          clickedpost: false\n        }, () => this.collect());\n      });\n    };\n\n    this.handlechange = e => {\n      e.preventDefault();\n      const name = e.target.name;\n      const value = e.target.value;\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.handlesubmitpost = async (e, x) => {\n      e.preventDefault();\n      const user = JSON.parse(localStorage.getItem('profile'));\n      const res = {\n        creator: (user === null || user === void 0 ? void 0 : user._id) || (user === null || user === void 0 ? void 0 : user.googleId),\n        title: this.state.title,\n        message: this.state.message,\n        tags: [this.state.tags],\n        selectedfile: this.state.selectedfile\n      };\n      const API = axios.create({\n        baseURL: 'http://localhost:8080/'\n      });\n      API.interceptors.request.use(req => {\n        if (localStorage.getItem('profile')) {\n          req.headers.authorization = `Bearer ${JSON.parse(localStorage.getItem('profile')).token}`;\n        }\n\n        return req;\n      });\n      await API.post('http://localhost:8080/posts/createdpost', { ...res,\n        name: JSON.parse(localStorage.getItem('profile')).name\n      }).then(setTimeout(() => {\n        this.collect();\n      }, 1500)).catch(console.log('error'));\n    };\n\n    this.clear = e => {\n      e.preventDefault();\n      this.setState({\n        creator: '',\n        title: '',\n        message: '',\n        tags: '',\n        selectedfile: ''\n      });\n    };\n\n    this.deletepost = async (e, id) => {\n      e.preventDefault();\n      const API = axios.create({\n        baseURL: 'http://localhost:8080/'\n      });\n      API.interceptors.request.use(req => {\n        if (localStorage.getItem('profile')) {\n          req.headers.authorization = `Bearer ${JSON.parse(localStorage.getItem('profile')).token}`;\n        }\n\n        return req;\n      });\n      await axios.delete('http://localhost:8080/posts/delete/' + id).then(setTimeout(() => {\n        this.collect();\n      }, 1500)).then(err => console.log(err));\n\n      if (this.state.posts.length) {\n        this.setState({\n          idpag: 0\n        });\n      }\n    };\n\n    this.likepost = async (e, id) => {\n      e.preventDefault();\n      const API = axios.create({\n        baseURL: 'http://localhost:8080/'\n      });\n      API.interceptors.request.use(req => {\n        if (localStorage.getItem('profile')) {\n          req.headers.authorization = `Bearer ${JSON.parse(localStorage.getItem('profile')).token}`;\n        }\n\n        return req;\n      });\n      await API.put('http://localhost:8080/posts/likepost/' + id).then(setTimeout(() => {\n        this.collect();\n      }, 1500));\n    };\n\n    this.googlefailure = () => {\n      console.log('try again later');\n    };\n\n    this.googlesuccess = async res => {\n      const result = res === null || res === void 0 ? void 0 : res.profileObj;\n      const token = res === null || res === void 0 ? void 0 : res.tokenId;\n\n      try {\n        await localStorage.setItem('profile', JSON.stringify({ ...result,\n          token\n        }));\n        this.setState({\n          issignin: true,\n          name: JSON.parse(localStorage.getItem('profile')).name,\n          imgsrc: JSON.parse(localStorage.getItem('profile')).imageUrl\n        });\n      } catch (error) {\n        console.log(error);\n      }\n    };\n\n    this.setshowpassword = () => {\n      this.setState({\n        showpassword: !this.state.showpassword\n      });\n    };\n\n    this.switchmode = () => {\n      this.setState({\n        signup: !this.state.signup\n      });\n    };\n\n    this.handlesubmit = async e => {\n      e.preventDefault();\n      const {\n        email,\n        password,\n        firstname,\n        lastname,\n        confirmpassword\n      } = this.state;\n\n      if (this.state.signup) {\n        const API = axios.create({\n          baseURL: 'http://localhost:8080'\n        });\n        API.interceptors.request.use(req => {\n          if (localStorage.getItem('profile')) {\n            req.headers.authorization = `Bearer ${JSON.parse(localStorage.getItem('profile')).token}`;\n          }\n\n          return req;\n        });\n        await API.post('/users/signup', {\n          email,\n          password,\n          firstname,\n          lastname,\n          confirmpassword\n        });\n        window.location = '/auth';\n      } else {\n        const API = axios.create({\n          baseURL: 'http://localhost:8080'\n        });\n        API.interceptors.request.use(req => {\n          if (localStorage.getItem('profile')) {\n            req.headers.authorization = `Bearer ${JSON.parse(localStorage.getItem('profile')).token}`;\n          }\n\n          return req;\n        });\n        await API.post('/users/signin', {\n          email,\n          password\n        }).then(res => {\n          let result = res.data.result;\n          let token = res.data.token;\n          localStorage.setItem('profile', JSON.stringify({ ...result,\n            token\n          }));\n          this.setState({\n            issignin: true,\n            name: result.name,\n            imgsrc: result.imageUrl,\n            name: result.name,\n            lastname: result.name.split(\" \")[0],\n            firstname: result.name.split(\" \")[1],\n            email: result.email\n          });\n          console.log(res.data.message);\n        });\n      }\n    };\n\n    this.logout = () => {\n      localStorage.clear();\n      this.setState({\n        issignin: false\n      });\n    };\n\n    this.editprofile = async e => {\n      e.preventDefault();\n\n      const id = JSON.parse(localStorage.getItem('profile'))._id;\n\n      const token = JSON.parse(localStorage.getItem('profile')).token;\n      const res = {\n        firstname: this.state.firstname,\n        lastname: this.state.lastname,\n        email: this.state.email,\n        password: this.state.password,\n        selectedfile: this.state.selectedfile\n      };\n      const API = axios.create({\n        baseURL: 'http://localhost:8080/'\n      });\n      API.interceptors.request.use(req => {\n        if (localStorage.getItem('profile')) {\n          req.headers.authorization = `Bearer ${JSON.parse(localStorage.getItem('profile')).token}`;\n        }\n\n        return req;\n      });\n      localStorage.clear();\n      await axios.put('http://localhost:8080/users/update/' + id, res).then(res => {\n        localStorage.setItem('profile', JSON.stringify({ ...res.data.result,\n          token\n        }));\n        this.setState({\n          firstname: res.data.firstname,\n          lastname: res.data.lastname,\n          email: res.data.email,\n          imgsrc: res.data.selectedfile\n        });\n        window.location = '/';\n      });\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(provider.Provider, {\n      value: { ...this.state,\n        clear: this.clear,\n        handlechange: this.handlechange,\n        handlesubmitpost: this.handlesubmitpost,\n        handlefile: this.handlefile,\n        precpage: this.precpage,\n        editprofile: this.editprofile,\n        logout: this.logout,\n        handlesubmit: this.handlesubmit,\n        googlesuccess: this.googlesuccess,\n        switchmode: this.switchmode,\n        setshowpassword: this.setshowpassword,\n        googlefailure: this.googlefailure,\n        updatepost: this.updatepost,\n        deletepost: this.deletepost,\n        nextpage: this.nextpage,\n        showupdate: this.showupdate,\n        likepost: this.likepost\n      },\n      children: this.props.children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 328,\n      columnNumber: 13\n    }, this);\n  }\n\n}\nconst Consumer = provider.Consumer;\nexport { Context, Consumer };","map":{"version":3,"sources":["C:/Users/U-Poste/Desktop/projet web avance-MERN/client/src/context.js"],"names":["React","Component","axios","provider","createContext","Context","state","posts","loading","creator","title","message","tags","selectedfile","clickedpost","idmodi","idpag","issignin","showpassword","firstname","lastname","email","password","confirmpassword","mazel","signup","imgsrc","name","collect","res","id","API","create","baseURL","interceptors","request","use","req","localStorage","getItem","headers","authorization","JSON","parse","token","post","then","setState","data","catch","err","console","log","componentDidMount","x","imageUrl","split","convertobas64","file","Promise","resolve","reject","reader","FileReader","onload","result","onerror","error","readAsDataURL","handlefile","e","target","files","base64","showupdate","preventDefault","filter","_id","slicepost","updatepost","put","handlechange","value","handlesubmitpost","user","googleId","setTimeout","clear","deletepost","delete","length","likepost","googlefailure","googlesuccess","profileObj","tokenId","setItem","stringify","setshowpassword","switchmode","handlesubmit","window","location","logout","editprofile","render","precpage","nextpage","props","children","Consumer"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport axios from 'axios'\r\n\r\n\r\nconst provider=React.createContext()\r\n\r\n\r\nexport default class Context extends Component {\r\nstate={\r\n            posts:[],\r\n            loading:true,\r\n            creator:'',\r\n            title:'',\r\n            message:'',\r\n            tags:'',\r\n            selectedfile:null,\r\n            clickedpost:false,\r\n            idmodi:null,\r\n            idpag:0,\r\n            issignin:false,\r\n            showpassword:false,\r\n            firstname:'',\r\n            lastname:'',\r\n            email:'',\r\n            password:'',\r\n            confirmpassword:'',\r\n            mazel:false,\r\n            signup:false,\r\n            imgsrc:'',\r\n            name:'',\r\n\r\n                    }\r\n\r\n collect= async ()=>{\r\n     const res={\r\n            id:this.state.idpag\r\n     }\r\n     const API=axios.create({baseURL:'http://localhost:8080/'})\r\n     API.interceptors.request.use((req)=>{\r\n         if(localStorage.getItem('profile')){\r\n             req.headers.authorization=`Bearer ${JSON.parse(localStorage.getItem('profile')).token}`\r\n         }\r\n         return req\r\n     })\r\n   await API.post('http://localhost:8080/posts/getPosts',res)\r\n    .then(res=>{\r\n        this.setState({\r\n            posts:res.data,\r\n            loading:false\r\n        })\r\n       })\r\n    .catch(err=>console.log(err))\r\n   \r\n    \r\n}\r\n\r\ncomponentDidMount=()=>{\r\nthis.collect()\r\nconst x=localStorage.getItem('profile')\r\nif (x!=null ){\r\n    this.setState({\r\n        issignin:true,\r\n        imgsrc:JSON.parse(x).imageUrl,\r\n        name:JSON.parse(x).name,\r\n        lastname:JSON.parse(x).name.split(\" \")[0],\r\n        firstname:JSON.parse(x).name.split(\" \")[1],\r\n        email:JSON.parse(x).email\r\n    })\r\n}\r\n}\r\n\r\nconvertobas64=(file)=>{\r\n\r\n        return (\r\n            new Promise(function (resolve, reject) {\r\n             let reader = new FileReader();\r\n             reader.onload = function () { resolve(reader.result); };\r\n             reader.onerror = function (error) { reject(error); };\r\n             reader.readAsDataURL(file);\r\n             \r\n         }))\r\n}\r\n\r\nhandlefile= async (e)=>{\r\n    const file=e.target.files[0]\r\n    const base64= await this.convertobas64(file)\r\n    this.setState({\r\n        selectedfile:base64\r\n       })\r\n}\r\n\r\nshowupdate=(e,id)=>{\r\n    e.preventDefault()\r\n    const post=this.state.posts.filter((res)=>res._id==id)[0]\r\n    this.setState({\r\n        creator:post.creator,\r\n        title:post.title,\r\n        message:post.message,\r\n        tags:post.tags,\r\n        clickedpost:!this.state.clickedpost,\r\n        idmodi:id,\r\n        selectedfile:post.selectedfile\r\n    })\r\n    console.log(\"slice\"+this.state.slicepost)\r\n    console.log(this.state.posts)\r\n\r\n}\r\n\r\nupdatepost=async(e,x)=>{\r\n    e.preventDefault()\r\n    const res={\r\n        creator:this.state.creator,\r\n        title:this.state.title,\r\n        message:this.state.message,\r\n        tags:this.state.tags,\r\n        selectedfile:this.state.selectedfile\r\n    }\r\n    const API=axios.create({baseURL:'http://localhost:8080/'})\r\nAPI.interceptors.request.use((req)=>{\r\n    if(localStorage.getItem('profile')){\r\n        req.headers.authorization=`Bearer ${JSON.parse(localStorage.getItem('profile')).token}`\r\n    }\r\n    return req\r\n})\r\n   await axios.put('http://localhost:8080/posts/update/'+x,{...res,name:JSON.parse(localStorage.getItem('profile')).name})\r\n    .then(()=>{\r\n            this.setState({\r\n                        clickedpost:false\r\n            },()=>this.collect())\r\n    })\r\n\r\n}\r\n\r\nhandlechange=(e)=>{\r\n         e.preventDefault()\r\n        const name =e.target.name\r\n        const value=e.target.value\r\n        this.setState({\r\n         [name]:value\r\n        })\r\n}\r\n\r\nhandlesubmitpost=async(e,x)=>{\r\n  e.preventDefault()\r\n   const user=JSON.parse(localStorage.getItem('profile'))\r\n    const res={\r\n        creator:(user?._id || user?.googleId),\r\n        title:this.state.title,\r\n        message:this.state.message,\r\n        tags:[this.state.tags],\r\n        selectedfile:this.state.selectedfile\r\n    }\r\n    const API=axios.create({baseURL:'http://localhost:8080/'})\r\nAPI.interceptors.request.use((req)=>{\r\n    if(localStorage.getItem('profile')){\r\n        req.headers.authorization=`Bearer ${JSON.parse(localStorage.getItem('profile')).token}`\r\n    }\r\n    return req\r\n})\r\n\r\n    await API.post('http://localhost:8080/posts/createdpost',{...res,name:JSON.parse(localStorage.getItem('profile')).name})\r\n    .then(setTimeout(() => {this.collect()\r\n    },1500))\r\n    .catch(console.log('error'))\r\n   \r\n} \r\n\r\nclear=(e)=>{\r\n       e.preventDefault()\r\n       this.setState({\r\n        creator:'',\r\n        title:'',\r\n        message:'',\r\n        tags:'',\r\n        selectedfile:'',\r\n       })\r\n}\r\n\r\ndeletepost=async(e,id)=>{\r\n    e.preventDefault()\r\n    const API=axios.create({baseURL:'http://localhost:8080/'})\r\nAPI.interceptors.request.use((req)=>{\r\n    if(localStorage.getItem('profile')){\r\n        req.headers.authorization=`Bearer ${JSON.parse(localStorage.getItem('profile')).token}`\r\n    }\r\n    return req\r\n})\r\n    await axios.delete('http://localhost:8080/posts/delete/'+id)\r\n    .then(setTimeout(() => {this.collect()\r\n    },1500))\r\n    .then(err=>console.log(err))\r\n    if (this.state.posts.length) {\r\n        this.setState({\r\n            idpag:0\r\n        })\r\n    }\r\n}\r\n\r\nlikepost=async(e,id)=>{\r\n    e.preventDefault()\r\n    const API=axios.create({baseURL:'http://localhost:8080/'})\r\nAPI.interceptors.request.use((req)=>{\r\n    if(localStorage.getItem('profile')){\r\n        req.headers.authorization=`Bearer ${JSON.parse(localStorage.getItem('profile')).token}`\r\n    }\r\n    return req\r\n})\r\n    await API.put('http://localhost:8080/posts/likepost/'+id)\r\n    .then(setTimeout(() => {this.collect()\r\n    },1500))\r\n}\r\n\r\ngooglefailure=()=>{\r\n    console.log('try again later')\r\n}\r\n\r\ngooglesuccess=async(res)=>{\r\n    const result=res?.profileObj\r\n    const token=res?.tokenId\r\n    try {\r\n     await localStorage.setItem('profile',JSON.stringify({...result,token}))\r\n      this.setState({\r\n        issignin:true,\r\n        name:JSON.parse(localStorage.getItem('profile')).name,\r\n        imgsrc:JSON.parse(localStorage.getItem('profile')).imageUrl\r\n    })\r\n    } catch (error) {\r\n        console.log(error)\r\n    }\r\n\r\n}\r\n\r\nsetshowpassword=()=>{\r\n    this.setState({\r\n        showpassword:!this.state.showpassword\r\n    })\r\n}\r\n\r\nswitchmode=()=>{\r\n    this.setState({\r\n        signup:!this.state.signup,\r\n\r\n    })\r\n}\r\n\r\nhandlesubmit=async (e)=>{\r\ne.preventDefault()\r\nconst {email,password,firstname,lastname,confirmpassword}=this.state\r\nif(this.state.signup){\r\n    const API=axios.create({baseURL:'http://localhost:8080'})\r\n        API.interceptors.request.use((req)=>{\r\n            if(localStorage.getItem('profile')){\r\n                req.headers.authorization=`Bearer ${JSON.parse(localStorage.getItem('profile')).token}`\r\n            }\r\n            return req\r\n        })\r\n    await API.post('/users/signup',{email,password,firstname,lastname,confirmpassword})\r\n    window.location='/auth'\r\n}else{\r\n    const API=axios.create({baseURL:'http://localhost:8080'})\r\nAPI.interceptors.request.use((req)=>{\r\n    if(localStorage.getItem('profile')){\r\n        req.headers.authorization=`Bearer ${JSON.parse(localStorage.getItem('profile')).token}`\r\n    }\r\n    return req\r\n})\r\n    await API.post('/users/signin',{email,password})\r\n    .then(res=>{\r\n        let result=res.data.result\r\n        let token=res.data.token\r\n        localStorage.setItem('profile',JSON.stringify({...result,token}))\r\n        this.setState({\r\n            issignin:true,\r\n            name:result.name,\r\n            imgsrc:result.imageUrl,\r\n            name:result.name,\r\n            lastname:result.name.split(\" \")[0],\r\n            firstname:result.name.split(\" \")[1],\r\n            email:result.email\r\n         })\r\n         console.log(res.data.message)\r\n    })\r\n}\r\n}\r\n\r\nlogout=()=>{\r\n    localStorage.clear()\r\n    this.setState({\r\n        issignin:false\r\n    })\r\n}\r\n\r\neditprofile=async(e)=>{\r\n    e.preventDefault()\r\n    const id=JSON.parse(localStorage.getItem('profile'))._id\r\n    const token=JSON.parse(localStorage.getItem('profile')).token\r\n    const res={\r\n        firstname:this.state.firstname,\r\n        lastname:this.state.lastname,\r\n        email:this.state.email,\r\n        password:this.state.password,\r\n        selectedfile:this.state.selectedfile\r\n    }\r\n    const API=axios.create({baseURL:'http://localhost:8080/'})\r\n    API.interceptors.request.use((req)=>{\r\n    if(localStorage.getItem('profile')){\r\n        req.headers.authorization=`Bearer ${JSON.parse(localStorage.getItem('profile')).token}`\r\n    }\r\n    return req\r\n})\r\n   localStorage.clear()\r\n   await axios.put('http://localhost:8080/users/update/'+id,res)\r\n    .then((res)=>{\r\n            localStorage.setItem('profile',JSON.stringify({...res.data.result,token}))\r\n            this.setState({\r\n                firstname:res.data.firstname,\r\n                lastname:res.data.lastname,\r\n                email:res.data.email,\r\n                imgsrc:res.data.selectedfile\r\n            })\r\n            window.location='/'\r\n        })\r\n\r\n}\r\n\r\nrender() {\r\n        return (\r\n            <provider.Provider value={{...this.state,clear:this.clear,handlechange:this.handlechange\r\n            ,handlesubmitpost:this.handlesubmitpost,handlefile:this.handlefile,\r\n            precpage:this.precpage,editprofile:this.editprofile,logout:this.logout,handlesubmit:this.handlesubmit,googlesuccess:this.googlesuccess,switchmode:this.switchmode,setshowpassword:this.setshowpassword,googlefailure:this.googlefailure,updatepost:this.updatepost,deletepost:this.deletepost,nextpage:this.nextpage,showupdate:this.showupdate,likepost:this.likepost}}>\r\n                {this.props.children}\r\n            </provider.Provider>\r\n        )\r\n}\r\n\r\n}\r\n\r\nconst Consumer=provider.Consumer\r\nexport {Context,Consumer}"]},"metadata":{},"sourceType":"module"}